# GraphWiz-XR Environment Configuration
# Copy this file to .env and customize for your setup
#
# Required for Traefik SSL/TLS:
#   1. Cloudflare API token with DNS edit permissions
#   2. Domain: xr.graphwiz.ai
#   3. Email for Let's Encrypt notifications

# =============================================================================
# TRAEFIK & DOMAIN CONFIGURATION
# =============================================================================
# Primary domain for the application
TRAEFIK_DOMAIN=xr.graphwiz.ai

# Cloudflare API Token for DNS challenge (SSL/TLS certificates)
# Create at: https://dash.cloudflare.com/profile/api-tokens
# Required permissions: Zone - DNS - Edit
CF_DNS_API_TOKEN=your_cloudflare_api_token_here

# Email for Let's Encrypt certificate notifications
LETSENCRYPT_EMAIL=admin@graphwiz.ai

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_USER=graphwiz
DATABASE_PASSWORD=change_this_secure_password_in_production
DATABASE_NAME=graphwiz

# Database URL (auto-configured, don't change usually)
DATABASE_URL=postgresql://graphwiz:change_this_secure_password_in_production@postgres:5432/graphwiz

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_PASSWORD=change_this_redis_password_in_production

# Redis URL (auto-configured)
REDIS_URL=redis://:change_this_redis_password_in_production@redis:6379

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
# Generate a strong secret with: openssl rand -base64 32
JWT_SECRET=change_this_jwt_secret_use_openssl_rand_base64_32
JWT_EXPIRATION=86400

# =============================================================================
# RUST LOGGING
# =============================================================================
# Options: trace, debug, info, warn, error
RUST_LOG=info

# =============================================================================
# SFU (Selective Forwarding Unit) CONFIGURATION
# =============================================================================
SFU_MAX_ROOMS=100
SFU_MAX_PEERS_PER_ROOM=50
SFU_MAX_VIDEO_TRACKS=4
SFU_MAX_AUDIO_TRACKS=2
SFU_ENABLE_SIMULCAST=true
SFU_ENABLE_SVC=false
SFU_MAX_VIDEO_BITRATE=3000000
SFU_MIN_VIDEO_BITRATE=300000
SFU_AUDIO_BITRATE=64000

# RTP Port Range for WebRTC media
SFU_RTP_PORT_START=10000
SFU_RTP_PORT_END=20000

# =============================================================================
# WEBRTC ICE SERVERS
# =============================================================================
# STUN servers (public Google STUN servers)
ICE_SERVER_1_URL=stun:stun.l.google.com:19302
ICE_SERVER_2_URL=stun:stun1.l.google.com:19302

# TURN server (required for production behind NAT)
# Generate credentials at: https://misc.ut.io/generateturn
# ICE_SERVER_3_URL=turn:turn.graphwiz.ai:3478
# ICE_SERVER_3_USERNAME=your_turn_username
# ICE_SERVER_3_CREDENTIAL=your_turn_credential

# =============================================================================
# CLIENT ENVIRONMENT VARIABLES
# =============================================================================
# These are used by the frontend clients
# Auto-configured for production domain
VITE_API_BASE_URL=https://xr.graphwiz.ai/api/auth
VITE_HUB_API_URL=https://xr.graphwiz.ai/api/hub
VITE_PRESENCE_WS_URL=wss://xr.graphwiz.ai/ws
VITE_SFU_URL=https://xr.graphwiz.ai/api/sfu

# =============================================================================
# ADMIN ACCESS
# =============================================================================
# Adminer database admin credentials
# Generate with: htpasswd -nb admin password
ADMIN_AUTH_USERNAME=admin
ADMIN_AUTH_PASSWORD=change_this_admin_password

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
NODE_ENV=production
VITE_DEV=false

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_WEBTRANSPORT=false
FEATURE_VR_MODE=true
FEATURE_SCREEN_SHARE=true
FEATURE_RECORDING=false

# =============================================================================
# SECURITY OPTIONS
# =============================================================================
# IP whitelist for admin routes (comma-separated)
# Leave empty to allow all (not recommended for production)
ADMIN_IP_WHITELIST=

# Rate limiting
RATE_LIMIT_AVERAGE=100
RATE_LIMIT_BURST=50
